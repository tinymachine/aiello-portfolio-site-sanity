---
import Button from './Button.astro'

import { urlForImage } from '../sanity/lib/urlForImage'

const { AboutContent, title, image, email_button, social_links } = Astro.props

// Generate image URL
const imageUrl = image ? urlForImage(image.asset).url() : null
---

<section class="section" id="about">
  <h3>{title}</h3>

  <div class="bleed-r">
    <img src={imageUrl} alt={image.alt} class="portrait" />
  </div>

  <div class="contact">
    <Button
      href={`mailto:${email_button.address}`}
      label={email_button.label}
    />

    <nav class="social">
      {social_links.map((service) => <a href={service.url}>{service.label}</a>)}
    </nav>
  </div>

  <AboutContent />
</section>

<style>
  .section {
    max-width: 36rem;
  }

  @media (min-width: 36rem) {
    .bleed-r {
      margin-right: 0;
    }
  }
</style>
